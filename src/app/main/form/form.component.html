<h1>Submit a Survey</h1>

<header>
<a [routerLink]="['/']">Home</a>
<a [routerLink]="['/surveys']">View Surveys</a>
</header>

<div class="container">
  <form class="form-horizontal col-md-offset-2" action="" #formData='ngForm' (submit)="create(formData.value)" novalidate>
    <div class="form-group">
      <label class="control-label col-md-2" for="firstName">First Name:</label>
      <div class="col-md-6">
        <input
          type="text"
          class="form-control"
          id="firstName"
          placeholder="Jane"
          name="firstName"
          required
          minlength="2"
  				maxlength="25"
          [(ngModel)]="survey.firstName"
          #firstName="ngModel"
          >
          <div *ngIf="firstName.invalid && (firstName.dirty || firstName.touched)" class="errors">
          <span *ngIf="firstName.errors.minlength">Too short</span><span *ngIf="firstName.errors.maxlength">Too long</span>
        </div>
      </div>
    </div>
    <div class="form-group">
      <label class="control-label col-md-2" for="lastName">Last Name:</label>
      <div class="col-md-6">
        <input
          type="text"
          class="form-control"
          id="lastName"
          placeholder="Doe"
          name="lastName"
          required
          minlength="2"
  				maxlength="25"
          [(ngModel)]="survey.lastName"
          #lastName="ngModel"
          >
          <div *ngIf="lastName.invalid && (lastName.dirty || lastName.touched)" class="errors">
          <span *ngIf="lastName.errors.minlength">Too short</span><span *ngIf="lastName.errors.maxlength">Too long</span>
        </div>
      </div>
    </div>
    <div class="form-group">
      <label class="control-label col-md-2" for="address">Street Address:</label>
      <div class="col-md-6">
        <input
          type="text"
          class="form-control"
          id="address"
          placeholder="4400 University Dr"
          name="address"
          required
          minlength="2"
  				maxlength="25"
          [(ngModel)]="survey.address"
          #address="ngModel"
          >
          <div *ngIf="address.invalid && (address.dirty || address.touched)" class="errors">
            <span *ngIf="address.errors.minlength">Too short</span><span *ngIf="address.errors.maxlength">Too long</span></div>
      </div>
    </div>
    <div class="form-group">
      <label class="control-label col-md-2" for="city">City:</label>
      <div class="col-sm-4">
        <input
          type="text"
          class="form-control"
          id="city"
          placeholder="Fairfax"
          name="city"
          required
          minlength="2"
  				maxlength="25"
          [(ngModel)]="survey.city"
          #city="ngModel"
          >
          <div *ngIf="city.invalid && (city.dirty || city.touched)" class="errors">
            <span *ngIf="city.errors.minlength">Too short</span><span *ngIf="city.errors.maxlength">Too long</span></div>
      </div>
    </div>
    <div class="form-group">
      <label class="control-label col-sm-2" for="state">State:</label>
      <div class="col-sm-4">
        <input
          type="text"
          class="form-control"
          id="state"
          placeholder="Virginia"
          name="state"
          required
          minlength="2"
  				maxlength="25"
          [(ngModel)]="survey.state"
          #state="ngModel"
          >
          <div *ngIf="state.invalid && (state.dirty || state.touched)" class="errors">
            <span *ngIf="state.errors.minlength">Too short</span><span *ngIf="state.errors.maxlength">Too long</span></div>
      </div>
    </div>
    <div class="form-group">
      <label class="control-label col-sm-2" for="zip">Zip Code:</label>
      <div class="col-sm-3">
        <input
          type="text"
          class="form-control"
          id="zip"
          placeholder="22030"
          name="zip"
          required
          pattern="[\d]{5}"
          [(ngModel)]="survey.zip"
          #zip="ngModel"
          >
          <div *ngIf="zip.invalid && (zip.dirty || zip.touched)" class="errors">
            <span *ngIf="zip.errors.pattern">Invalid Zip Code</span></div>
      </div>
    </div>
    <div class="form-group">
      <label class="control-label col-sm-2" for="telephone">Telephone Number:</label>
      <div class="col-sm-4">
        <input
          type="tel"
          class="form-control"
          id="phone"
          placeholder="703-993-1000"
          name="telephone"
          required
          pattern="^[1-9]\d{2}(-| )?\d{3}(-| )?\d{4}$"
          [(ngModel)]="survey.telephone"
          #telephone="ngModel"
          >
          <div *ngIf="telephone.invalid && (telephone.dirty || telephone.touched)" class="errors">
            <span *ngIf="telephone.errors.pattern">Invalid Phone Number</span></div>
      </div>
    </div>
    <div class="form-group">
      <label class="control-label col-sm-2" for="email">Email:</label>
      <div class="col-sm-6">
        <input
          type="email"
          class="form-control"
          id="email"
          placeholder="csgrad@gmu.edu"
          name="email"
          required
          minlength="5"
  				maxlength="45"
          pattern="^[a-zA-Z0-9.!#$%&*+\/=?_{|}~-]+@[a-zA-Z0-9-]+(?:\.[a-zA-Z0-9-]+)*$"
          [(ngModel)]="survey.email"
          #email="ngModel"
          >
          <div *ngIf="email.invalid && (email.dirty || email.touched)" class="errors">
            <span *ngIf="email.errors.pattern && !(email.errors.minlength || email.errors.maxlength)">Invalid Email</span><span *ngIf="email.errors.minlength" class="warnings">Too Short</span><span *ngIf="email.errors.maxlength">Too Long</span></div>
      </div>
    </div>
    <div class="form-group">
      <div class="col-sm-6"><label class="control-label col-sm-4" for="likeMost">Like Most:</label>
        <div class="col-sm-6">
          <div class="checkbox">
          <label><input
            type="checkbox"
            name="students"
            [(ngModel)]="survey.likeMost.students"
            #likeMost.students="ngModel"
            >Students</label>
        </div>
        <div class="checkbox">
          <label><input
            type="checkbox"
            name="location"
            [(ngModel)]="survey.likeMost.location"
            #likeMost.location="ngModel"
            >Location</label>
        </div>
        <div class="checkbox">
          <label><input
            type="checkbox"
            name="campus"
            [(ngModel)]="survey.likeMost.campus"
            #likeMost.campus="ngModel"
            >Campus</label>
        </div>
        <div class="checkbox">
          <label><input
            type="checkbox"
            name="atmosphere"
            [(ngModel)]="survey.likeMost.atmosphere"
            #likeMost.atmosphere="ngModel"
            >Atmosphere</label>
        </div>
        <div class="checkbox">
          <label><input
            type="checkbox"
            name="dorms"
            [(ngModel)]="survey.likeMost.dorms"
            #likeMost.dorms="ngModel"
            >Dorm Rooms</label>
        </div>
        <div class="checkbox">
          <label><input
            type="checkbox"
            name="sports"
            [(ngModel)]="survey.likeMost.sports"
            #likeMost.sports="ngModel"
            >Sports</label>
        </div>
        </div>
      </div>
    </div>
    <div class="form-group">
      <div class="col-sm-12"><label class="control-label col-sm-2" for="referral">Referred By:</label>
          <label class="radio-inline">
            <input
              type="radio"
              name="referral"
              value="0"
              checked
              [(ngModel)]="survey.referral"
              #referral="ngModel"
              >Friends</label>
          <label class="radio-inline">
            <input
              type="radio"
              name="referral"
              value="1"
              [(ngModel)]="survey.referral"
              #referral="ngModel"
              >Television</label>
          <label class="radio-inline">
            <input
              type="radio"
              name="referral"
              value="2"
              [(ngModel)]="survey.referral"
              #referral="ngModel"
              >Internet</label>
          <label class="radio-inline">
            <input
              type="radio"
              name="referral"
              value="3"
              [(ngModel)]="survey.referral"
              #referral="ngModel"
              >Other</label>
      </div>
    </div>
    <div class="form-group">
      <div class="col-sm-12">
        <label class="control-label col-sm-2" for="recommend">Likely to Recommend School:</label>
        <div class="col-sm-4"><select class="form-control" [(ngModel)]="survey.recommend" name="recommend" #recommend="ngModel" id="recommend">
          <option *ngFor="let r of ['Very Likely', 'Likely', 'Unlikely'], let i = index" value="{{r}}">{{r}}</option>
        </select></div>
      </div>
    </div>
    <div class="form-group">
      <div class="col-sm-12">
      <label class="control-label col-sm-2" for="raffle">Raffle:</label>
        <div class="col-sm-4">
          <input
            type="text"
            class="form-control"
            id="raffle"
            placeholder="1,25,67,..."
            name="raffle"
            pattern="^\d{1,3}(, *\d{1,3}){0,9}$"
            [(ngModel)]="survey.raffle"
            #raffle="ngModel"
            >
            <div *ngIf="raffle.invalid && (raffle.dirty || raffle.touched)" class="warnings"><span *ngIf="raffle.errors.pattern">Invalid Raffle Numbers</span></div>
          <small id="raffleHelp" class="form-text text-muted">(Optional) Enter at least ten comma separated numbers ranging from 1 through 100.</small>
        </div>
      </div>
    </div>
    <div class="form-group">
    <label class="col-sm-6" for="comments">Additional Comments:</label>
    <textarea
      class="form-control"
      rows="5"
      id="comments"
      name="comments"
      [(ngModel)]="survey.comments"
      #comments="ngModel"
      ></textarea>
  </div>
    <div class="form-group">
      <div class="btn-group col-sm-offset-4">
        <button
          type="submit"
          class="btn btn-primary"
          [disabled] = "firstName.errors || lastName.errors || address.errors || city.errors || state.errors || zip.errors || telephone.errors || email.errors"
          >Submit</button>
        <button type="button" class="btn btn-default" (click)="cancel()">Cancel</button>
      </div>
    </div>
  </form>
</div>
